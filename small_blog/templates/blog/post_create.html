{% extends "base.html" %}

{% load django_bootstrap5 %}

{% block title %}
  Новый пост
{% endblock %}
{% block content %}
{% with data=form.instance %}
  {% if form.is_valid %}
  <div class="mb-3">
    <h2 class="py-3">Новый пост успешно создан</h2>
    <small>Дата и время создания: {{ data.pub_date }}</small>
  </div>
  {% else %}
    {% if '/edit/' in request.path %}
    <h1 class="py-3">Редактировать пост</h1>
    {% else %}
    <h1 class="py-3">Создать пост</h1>
    {% endif %}
    <div class="mb-3">
      <div class="col-6">
        <div class="card-body">
          <form method="post">
            {% csrf_token %}
            {% bootstrap_form form %}
            {% bootstrap_button button_type="submit" style="width: 8rem;" content="Отправить" %}
            {% if '/edit/' in request.path %}
              <a type="button" class="btn btn-danger" style="width: 8rem;" href="{% url 'blog:delete' post.id %}" role="button">Удалить</a>
            {% endif %}
            <a type="button" class="btn" style="width: 8rem;" href="{% url 'blog:list' %}" role="button">Отменить</a>
          </form>
        </div>
      </div>
    </div>
  {% endif %}
{% endwith %}
{% endblock %}
